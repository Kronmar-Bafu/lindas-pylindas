import requests

# URL of the CSV file
url = "https://www.ag.ch/app/sajato-api/api/v2/export?columns=SIS_BEVS0001D.1.ALTER_00_04-ALTER_05_09-ALTER_10_14-ALTER_15_19-ALTER_20_24-ALTER_25_29-ALTER_30_34-ALTER_35_39-ALTER_40_44-ALTER_45_49-ALTER_50_54-ALTER_55_59-ALTER_60_64-ALTER_65_69-ALTER_70_74-ALTER_75_79-ALTER_80_84-ALTER_85_89-ALTER_90_-TOTAL&prefix=multiple&sep=%E2%82%AC&search=19%2C1901%2C1902%2C1903%2C1904%2C1905%2C1906%2C1907%2C1908%2C1909%2C1910%2C1911%2C4001%2C4271%2C4221%2C4191%2C4222%2C4061%2C4272%2C4091%2C4223%2C4323%2C4021%2C4301%2C4224%2C4131%2C4022%2C4225%2C4023%2C4062%2C4226%2C4227%2C4002%2C4024%2C4092%2C4093%2C4132%2C4192%2C4228%2C4273%2C4063%2C4274%2C4095%2C4193%2C4003%2C4133%2C4230%2C4302%2C4303%2C4124%2C4094%2C4185%2C4229%2C4064%2C4004%2C4231%2C4194%2C4065%2C4025%2C4304%2C4134%2C4096%2C4066%2C4195%2C4049%2C4161%2C4097%2C4305%2C4026%2C4005%2C4162%2C4196%2C4067%2C4306%2C4027%2C4028%2C4163%2C4307%2C4098%2C4164%2C4029%2C4232%2C4165%2C4135%2C4006%2C4099%2C4197%2C4100%2C4251%2C4198%2C4069%2C4166%2C4186%2C4070%2C4007%2C4199%2C4136%2C4167%2C4101%2C4200%2C4068%2C4084%2C4168%2C4071%2C4252%2C4308%2C4169%2C4233%2C4030%2C4275%2C4309%2C4310%2C4276%2C4031%2C4008%2C4170%2C4102%2C4311%2C4137%2C4312%2C4201%2C4313%2C4138%2C4103%2C4104%2C4253%2C4105%2C4202%2C4314%2C4033%2C4139%2C4234%2C4171%2C4184%2C4277%2C4009%2C4255%2C4279%2C4236%2C4032%2C4254%2C4106%2C4203%2C4235%2C4278%2C4107%2C4172%2C4034%2C4204%2C4035%2C4072%2C4108%2C4036%2C4010%2C4109%2C4173%2C4174%2C4140%2C4073%2C4256%2C4037%2C4237%2C4038%2C4074%2C4175%2C4280%2C4257%2C4205%2C4141%2C4281%2C4315%2C4039%2C4110%2C4258%2C4316%2C4111%2C4011%2C4282%2C4238%2C4075%2C4206%2C4112%2C4317%2C4283%2C4076%2C4207%2C4113%2C4125%2C4114%2C4115%2C4142%2C4143%2C4318%2C4259%2C4176%2C4144%2C4208%2C4209%2C4319%2C4239%2C4177%2C4040%2C4284%2C4210%2C4260%2C4041%2C4116%2C4285%2C4012%2C4178%2C4320%2C4145%2C4117%2C4042%2C4077%2C4179%2C4286%2C4078%2C4118%2C4119%2C4043%2C4321%2C4013%2C4146%2C4079%2C4044%2C4120%2C4121%2C4080%2C4122%2C4287%2C4261%2C4240%2C4262%2C4045%2C4081%2C4180%2C4288%2C4123%2C4322%2C4181%2C4082%2C4046%2C4182%2C4047%2C4048%2C4183%2C4263%2C4147%2C4289%2C4083%2C4324%2C4264&fileType=csv&dateFrom=&dateTo="

# Local filename to save the downloaded file
filename = "./example/Cubes/Population_Aargau/data_raw.csv"

# Download the file
response = requests.get(url)
if response.status_code == 200:
    with open("./" + filename, 'wb') as f:
        f.write(response.content.decode('latin-1').encode('utf-8'))
    print(f"File downloaded and saved as {filename}")
else:
    print(f"Failed to download file. Status code: {response.status_code}")